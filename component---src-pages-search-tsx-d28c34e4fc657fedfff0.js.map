{"version":3,"sources":["webpack:///./src/components/SearchInput/index.tsx","webpack:///./src/components/SearchResult/index.tsx","webpack:///./src/hooks/useQueryParam.ts","webpack:///./src/hooks/useSearchResult.ts","webpack:///./src/pages/search.tsx","webpack:///./src/utils/helpers.ts","webpack:///./src/consts.ts","webpack:///./src/hooks/useWindowScroll.ts","webpack:///./src/assets/icon.png","webpack:///./src/components/Post/index.tsx","webpack:///./src/components/Header/index.tsx","webpack:///./src/components/Footer/index.tsx","webpack:///./src/components/Layout/index.tsx","webpack:///./node_modules/query-string/index.js","webpack:///./node_modules/query-string/node_modules/strict-uri-encode/index.js","webpack:///./node_modules/decode-uri-component/index.js","webpack:///./node_modules/split-on-first/index.js"],"names":["SearchInput","props","value","count","onChange","inputEl","React","current","focus","react","className","type","ref","placeholder","e","val","currentTarget","_","isEmpty","SearchResult","posts","map","node","Post","key","id","post","excerpt","useQueryParam","location","pathname","search","params","queryString","parse","_useState","useState","param","setParam","useEffect","_Object$assign","newParams","pickBy","identity","Object","assign","replace","stringify","useSearchResult","preset","keyword","result","setResult","handler","setTimeout","searchResult","filter","tags","get","date","title","toLower","rawMarkdownBody","startsWith","TAG_SYMBOL","searchTag","trim","includes","DATE_SYMBOL","searchDate","test","format","searchKeyword","clearTimeout","__webpack_require__","d","__webpack_exports__","query","SearchPage","data","getMarkdownRemarkEdgeNode","_useQueryParam","_useQueryParam$","setKeyword","Layout","Container","Row","Col","lg","src_components_SearchInput","length","src_components_SearchResult","getPostLink","fields","slug","formatPostDate","formatReadingTime","time","Math","round","getDocumentScrollTop","window","pageYOffset","document","documentElement","scrollTop","isInViewportByElementId","$el","getElementById","rect","getBoundingClientRect","clientHeight","top","replaceUrlWithoutRefresh","url","history","replaceState","compose","groupByDateFromNodes","sortBy","_ref","getTime","entries","groupBy","collectTagNamesFromNodes","uniq","reduce","concat","react__WEBPACK_IMPORTED_MODULE_0__","useWindowSrcoll","callback","resize","scrollListener","event","addEventListener","removeEventListener","module","exports","gatsby__WEBPACK_IMPORTED_MODULE_1__","classnames__WEBPACK_IMPORTED_MODULE_2__","classnames__WEBPACK_IMPORTED_MODULE_2___default","n","react_icons_fa__WEBPACK_IMPORTED_MODULE_3__","_utils_helpers__WEBPACK_IMPORTED_MODULE_4__","_consts__WEBPACK_IMPORTED_MODULE_5__","_post$frontmatter","frontmatter","html","exp","timeToRead","postLink","clazz","classnames","to","dangerouslySetInnerHTML","__html","name","defaultProps","headerHeight","Header","_props$metadata","metadata","menu","_React$useState","hide","setHide","_React$useState2","lastScrollTop","setLastScrollTop","headerRef","useWindowScroll","offsetHeight","headerClassName","header","onClick","navigate","src","iconPng","alt","path","gatsby_browser_entry","aria-label","fa","itemClasss","menu-item","active","href","target","Footer","since","author","socials","friends","currentYear","Date","getFullYear","extra","items","_ref2","_ref3","link","_3389584124","src_components_Header","children","src_components_Footer","strictUriEncode","decodeComponent","splitOnFirst","encode","options","strict","encodeURIComponent","decode","extract","input","queryStart","indexOf","slice","formatter","arrayFormat","accumulator","exec","undefined","newValue","split","parserForArrayFormat","ret","create","keys","sort","Boolean","Array","isArray","keysSorter","a","b","Number","object","index","join","encoderForArrayFormat","x","parseUrl","hashStart","str","charCodeAt","toString","toUpperCase","singleMatcher","RegExp","multiMatcher","decodeComponents","components","decodeURIComponent","err","left","right","prototype","call","tokens","match","i","encodedURI","TypeError","replaceMap","%FE%FF","%FF%FE","customDecodeURIComponent","string","separator","separatorIndex"],"mappings":"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","file":"component---src-pages-search-tsx-d28c34e4fc657fedfff0.js","sourcesContent":["import * as React from 'react';\nimport _ from 'lodash/fp';\n\nimport './index.scss';\n\ninterface ISearchInputProps {\n  value: string;\n  count: number;\n  onChange: any;\n}\n\nconst SearchInput = (props: ISearchInputProps) => {\n  const { value, count, onChange } = props;\n  const inputEl = React.useRef(null);\n\n  const handleSearchChange = (e: React.ChangeEvent) => {\n    // @ts-ignore\n    const val = e.currentTarget.value;\n    onChange(val);\n  };\n\n  React.useEffect(() => {\n    inputEl.current.focus();\n  }, []);\n\n  return (\n    <div className=\"search-input\">\n      <input\n        type=\"text\"\n        ref={inputEl}\n        className=\"input\"\n        placeholder=\"站内搜索\"\n        value={value}\n        onChange={handleSearchChange}\n      />\n      {!_.isEmpty(value) && (\n        <span className=\"count\">\n          {count}\n        </span>\n      )}\n    </div>\n  );\n};\n\nexport default SearchInput;\n","import * as React from 'react';\n\nimport Post from '../Post';\nimport './index.scss';\n\ninterface ISearchResultProps {\n  posts: IMarkdownRemarkNode[];\n}\n\nconst SearchResult = (props: ISearchResultProps) => {\n  const { posts } = props;\n\n  return (\n    <div className=\"search-result\">\n      {posts.map((node: IMarkdownRemarkNode) => (\n        <Post key={node.id} post={node} excerpt />\n      ))}\n    </div>\n  );\n};\n\nexport default SearchResult;\n","import { useState, useEffect } from 'react';\nimport { replace } from 'gatsby';\nimport queryString from 'query-string';\nimport _ from 'lodash/fp';\n\nconst useQueryParam = (location: Location, key: string) => {\n  const { pathname, search } = location;\n  const params = queryString.parse(search);\n  const [param, setParam] = useState(params[key]);\n\n  useEffect(() => {\n    const newParams = _.pickBy(_.identity, {\n      ...queryString.parse(location.search),\n      [key]: param,\n    });\n    if (_.isEmpty(newParams)) {\n      replace(pathname);\n    } else {\n      replace(`${pathname}?` + queryString.stringify(newParams));\n    }\n  }, [pathname, key, param]);\n\n  return [param, setParam];\n};\n\nexport default useQueryParam;\n","import { useState, useEffect } from 'react';\nimport format from 'date-fns/format';\nimport _ from 'lodash/fp';\n\nimport { TAG_SYMBOL, DATE_SYMBOL } from '../consts';\n\nconst useSearchResult = (preset: IMarkdownRemarkNode[], keyword: string) => {\n  const [result, setResult] = useState([]);\n\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      if (keyword === '') {\n        setResult([]);\n        return;\n      }\n      const searchResult = _.filter((node: IMarkdownRemarkNode) => {\n        const tags = _.get('frontmatter.tags', node) || [];\n        const date = _.get('frontmatter.date', node);\n        const title = _.toLower(_.get('frontmatter.title', node));\n        const rawMarkdownBody = _.toLower(_.get('rawMarkdownBody', node));\n\n        if (_.startsWith(TAG_SYMBOL, keyword)) {\n          const searchTag = _.toLower(_.trim(keyword.replace(TAG_SYMBOL, '')));\n          return _.includes(searchTag, _.map(_.toLower, tags));\n        }\n        if (_.startsWith(DATE_SYMBOL, keyword)) {\n          const searchDate = _.trim(keyword.replace(DATE_SYMBOL, ''));\n          if (/^\\d{4}$/.test(searchDate)) {\n            return format(searchDate, 'YYYY') === format(date, 'YYYY');\n          }\n          if (/^\\d{4}\\/\\d{1,2}$/.test(searchDate)) {\n            return format(searchDate, 'YYYY/MM') === format(date, 'YYYY/MM');\n          }\n          if (/^\\d{4}\\/\\d{1,2}\\/\\d{1,2}$/.test(searchDate)) {\n            return format(searchDate, 'YYYY/MM/DD') === format(date, 'YYYY/MM/DD');\n          }\n          return false;\n        }\n\n        const searchKeyword = _.toLower(_.trim(keyword));\n        return _.includes(searchKeyword, title) || _.includes(searchKeyword, rawMarkdownBody);\n      }, preset);\n      setResult(searchResult);\n    }, 600);\n\n    return () => clearTimeout(handler);\n  }, [keyword]);\n\n  return result;\n};\n\nexport default useSearchResult;\n","import * as React from 'react';\nimport { graphql } from 'gatsby';\nimport _ from 'lodash/fp';\nimport { Container, Row, Col } from 'react-bootstrap';\n\nimport Layout from '../components/Layout';\nimport SearchInput from '../components/SearchInput';\nimport SearchResult from '../components/SearchResult';\nimport useQueryParam from '../hooks/useQueryParam';\nimport useSearchResult from '../hooks/useSearchResult';\nimport { getMarkdownRemarkEdgeNode } from '../utils/helpers';\n\ninterface ISearchPageProps {\n  location: Location;\n  data: {\n    allMarkdownRemark: IMarkdownRemark;\n  };\n  pageContext: {\n    page: number;\n    total: number;\n    limit: number;\n  };\n}\n\nconst SearchPage = (props: ISearchPageProps) => {\n  const { location, data } = props;\n  const posts = getMarkdownRemarkEdgeNode(data);\n\n  const [keyword = '', setKeyword] = useQueryParam(location, 'keyword');\n  const result = useSearchResult(posts, keyword as string);\n\n  return (\n    <Layout location={location}>\n      <Container>\n        <Row className=\"justify-content-md-center\">\n          <Col lg={10}>\n            <SearchInput value={keyword} count={result.length} onChange={setKeyword} />\n            {result.length > 0 && <SearchResult posts={result} />}\n          </Col>\n        </Row>\n      </Container>\n    </Layout>\n  );\n};\n\nexport const query = graphql`\n  query GetSearchPost {\n    allMarkdownRemark(sort: { fields: frontmatter___date, order: DESC }) {\n      edges {\n        node {\n          id\n          frontmatter {\n            title\n            date(formatString: \"YYYY/MM/DD\")\n            tags\n          }\n          fields {\n            slug\n          }\n          excerpt(truncate: true)\n          rawMarkdownBody\n          timeToRead\n        }\n      }\n    }\n  }\n`;\n\nexport default SearchPage;\n","import _ from 'lodash/fp';\nimport format from 'date-fns/format';\nimport getTime from 'date-fns/get_time';\n\n// getPostLink :: IMarkdownRemarkNode -> string\nexport const getPostLink = (post: IMarkdownRemarkNode) => {\n  const {\n    fields: { slug },\n  } = post;\n  return slug;\n};\n\n// formatPostDate :: string -> string\nexport const formatPostDate = (date: string) => {\n  return format(date, 'YYYY年MM月DD日');\n};\n\n// formatReadingTime :: number -> string\nexport const formatReadingTime = (time: number) => {\n  const minutes = Math.round(time * 2);\n  return `预计阅读需要 ${minutes} 分钟`;\n};\n\n// getDocumentScrollTop :: () -> number\nexport const getDocumentScrollTop = () => {\n  return window.pageYOffset || document.documentElement.scrollTop;\n};\n\n// isInViewportByElementId :: string -> boolean\nexport const isInViewportByElementId = (id) => {\n  const $el = document.getElementById(id);\n  if ($el === null) {\n    return false;\n  }\n  const rect = $el.getBoundingClientRect();\n  const clientHeight = document.documentElement.clientHeight;\n  return rect.top < clientHeight;\n};\n\nexport const replaceUrlWithoutRefresh = (url) => {\n  history.replaceState('', document.title, url);\n};\n\n// getMarkdownRemarkEdgeNode :: ImarkdownRemark -> IMarkdownRemarkNode[]\nexport const getMarkdownRemarkEdgeNode = _.compose(\n  _.map('node'),\n  _.get('allMarkdownRemark.edges'),\n);\n\n// groupByDateFromPost :: IMarkdownRemarkNode[] -> Dictionary<ImarkdownRemarkNode[]>\nexport const groupByDateFromNodes = _.compose(\n  _.sortBy([([date]) => -getTime(date)]),\n  _.entries,\n  _.groupBy(\n    _.compose(\n      (date) => format(date, 'YYYY/MM'),\n      _.get('frontmatter.date'),\n    ),\n  ),\n);\n\n// collectTagNamesFromNodes :: IMarkdownRemarkNode[] -> string[]\nexport const collectTagNamesFromNodes = _.compose(\n  _.uniq,\n  _.reduce(_.concat, []),\n  _.map('frontmatter.tags'),\n);\n","export const TAG_SYMBOL = '@tag:';\nexport const DATE_SYMBOL = '@date:';\n","import { useEffect } from 'react';\n\ntype CallbackFunc = (event: Event) => void;\n\nconst useWindowSrcoll = (callback: CallbackFunc, resize: boolean = false) => {\n  useEffect(() => {\n    const scrollListener: EventListener = (event) => callback(event);\n    document.addEventListener('scroll', scrollListener);\n    return () => {\n      document.removeEventListener('scroll', scrollListener);\n    };\n  });\n};\n\nexport default useWindowSrcoll;\n","module.exports = \"data:image/png;base64,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\"","import * as React from 'react';\nimport { Link } from 'gatsby';\nimport classnames from 'classnames';\nimport { FaCalendarAlt, FaClock, FaHashtag } from 'react-icons/fa';\n\nimport { getPostLink, formatPostDate, formatReadingTime } from '../../utils/helpers';\nimport { TAG_SYMBOL } from '../../consts';\nimport './index.scss';\n\ninterface IPostDetailProps {\n  post: IMarkdownRemarkNode;\n  excerpt?: boolean;\n}\n\nconst Post = (props: IPostDetailProps) => {\n  const { post, excerpt } = props;\n  const {\n    frontmatter: { title, date, tags },\n    html,\n    excerpt: exp,\n    timeToRead,\n  } = post;\n  const postLink = getPostLink(post);\n\n  const clazz = classnames({\n    post: true,\n    excerpt,\n  });\n\n  return (\n    <article className={clazz}>\n      <div className=\"post-header\">\n        {excerpt ? (\n          <h2 className=\"post-title\">\n            <Link className=\"post-title__link\" to={postLink}>\n              {title}\n            </Link>\n          </h2>\n        ) : (\n          <h1 className=\"post-title\">{title}</h1>\n        )}\n        <div className=\"post-meta\">\n          <span className=\"post-created-at\">\n            <span className=\"post-meta__icon\">\n              <FaCalendarAlt />\n            </span>\n            {formatPostDate(date)}\n          </span>\n          <span className=\"post-reading-time\">\n            <span className=\"post-meta__icon\">\n              <FaClock />\n            </span>\n            {formatReadingTime(timeToRead)}\n          </span>\n        </div>\n      </div>\n      <div className=\"post-content\">\n        {excerpt ? (\n          <div>\n            <p className=\"post-excerpt\">{exp}</p>\n            <div className=\"post-read-more\">\n              <Link className=\"post-read-more__link\" to={postLink}>\n                阅读更多...\n              </Link>\n            </div>\n          </div>\n        ) : (\n          <div className=\"markdown\" dangerouslySetInnerHTML={{ __html: html }} />\n        )}\n      </div>\n      {!excerpt && (\n        <div className=\"post-footer\">\n          <div className=\"post-tags\">\n            {tags.map((name) => (\n              <span className=\"post-tag\" key={name}>\n                <span className=\"post-tag__icon\">\n                  <FaHashtag />\n                </span>\n                <Link className=\"post-tag__link\" to={`/search?keyword=${TAG_SYMBOL} ${name}`}>\n                  {name}\n                </Link>\n              </span>\n            ))}\n          </div>\n        </div>\n      )}\n    </article>\n  );\n};\n\nPost.defaultProps = {\n  excerpt: false,\n};\n\nexport default Post;\n","import * as React from 'react';\nimport classnames from 'classnames';\nimport { navigate, Link } from 'gatsby';\nimport { Container } from 'react-bootstrap';\nimport { FaSearch } from 'react-icons/fa';\nimport _ from 'lodash/fp';\n\nimport useWindowScroll from '../../hooks/useWindowScroll';\nimport { getDocumentScrollTop } from '../../utils/helpers';\n\nimport iconPng from '../../assets/icon.png';\nimport './index.scss';\n\ninterface IHeaderComponentProps {\n  location: Location;\n  metadata: ISiteMetadata;\n}\n\nlet headerHeight: number = 0;\n\nconst Header = (props: IHeaderComponentProps) => {\n  const { pathname } = props.location;\n  const { title, menu } = props.metadata;\n\n  const [hide, setHide] = React.useState(false);\n  const [lastScrollTop, setLastScrollTop] = React.useState(0);\n  const headerRef = React.createRef<HTMLDivElement>();\n\n  useWindowScroll((event) => {\n    const scrollTop = getDocumentScrollTop();\n    if (!headerHeight) {\n      headerHeight = headerRef.current.offsetHeight / 2;\n    }\n\n    const outrideHeader = scrollTop < headerHeight;\n    const isScrollUp = scrollTop < lastScrollTop;\n\n    setHide(!(outrideHeader || isScrollUp));\n    setLastScrollTop(scrollTop);\n  });\n\n  const headerClassName = classnames({ header: true, hide });\n\n  return (\n    <header className={headerClassName} ref={headerRef}>\n      <Container>\n        <div className=\"title\">\n          <h1 className=\"title__link\" onClick={() => navigate('/')}>\n            <img className=\"title__icon\" src={iconPng} alt={title} />\n            {title}\n          </h1>\n        </div>\n        <nav className=\"nav\">\n          <ul className=\"menu\">\n            {menu.map(({ name, path, header }) => {\n              if (!header) {\n                return null;\n              }\n\n              if (path === '/search') {\n                return (\n                  <li key={path} className=\"menu-item search\">\n                    <Link to=\"/search\" className=\"menu-item__link\" aria-label={name}>\n                      <FaSearch className=\"menu-item__icon\" />\n                    </Link>\n                  </li>\n                );\n              }\n\n              const itemClasss = classnames({\n                'menu-item': true,\n                'active': path === pathname,\n              });\n              return (\n                <li className={itemClasss} key={path}>\n                  {path.startsWith('http') ? (\n                    <a href={path} className=\"menu-item__link\" target=\"__blank\" aria-label={name}>\n                      {name}\n                    </a>\n                  ) : (\n                    <Link to={path} className=\"menu-item__link\" aria-label={name}>\n                      {name}\n                    </Link>\n                  )}\n                </li>\n              );\n            })}\n          </ul>\n        </nav>\n      </Container>\n    </header>\n  );\n};\n\nexport default Header;\n","import * as React from 'react';\nimport { Link, withPrefix } from 'gatsby';\nimport { FaHeart } from 'react-icons/fa';\nimport { Container, Row, Col } from 'react-bootstrap';\n\nimport './index.scss';\n\ninterface IFooterProps {\n  metadata: ISiteMetadata;\n}\n\nconst Footer = (props: IFooterProps) => {\n  const { since, author, menu, socials, friends } = props.metadata;\n\n  const currentYear = new Date().getFullYear();\n  const extra = [{ title: 'SOCIALS / 社交', items: socials }, { title: 'FRIENDS / 友链', items: friends }];\n\n  return (\n    <footer className=\"footer\">\n      <Container>\n        <Row>\n          <Col lg={12}>\n            <div className=\"copyright\">\n              <ul className=\"menu\">\n                {menu.map(({ name, path }) => (\n                  <li className=\"menu-item\" key={path}>\n                    {path.startsWith('http') ? (\n                      <a href={path} className=\"menu-item__link\" target=\"__blank\">\n                        {name}\n                      </a>\n                    ) : (\n                      <Link to={path} className=\"menu-item__link\">\n                        {name}\n                      </Link>\n                    )}\n                  </li>\n                ))}\n              </ul>\n              <div className=\"copyright__text\">\n                <span>\n                  Copyright &copy; {since} - {currentYear}\n                </span>\n                <span className=\"copyright__icon\">\n                  <FaHeart />\n                </span>\n                <span>{author}</span>\n              </div>\n              <div className=\"power-by\">\n                <span className=\"power-item\">\n                  Power by\n                  <a className=\"power-item__link\" href=\"https://www.gatsbyjs.org/\">\n                    Gatsbyjs\n                  </a>\n                </span>\n                <span className=\"power-item\">\n                  Design by\n                  <a className=\"power-item__link\" href=\"https://github.com/ahonn\">\n                    Ahonn\n                  </a>\n                </span>\n              </div>\n            </div>\n            <div className=\"extra\">\n              {extra.map(({ title, items }) => (\n                <div className=\"block\" key={title}>\n                  <span className=\"block-title\">{title}</span>\n                  <ul className=\"block-items\">\n                    {items.map(({ name, link }) => (\n                      <li className=\"block-item\" key={link}>\n                        <a className=\"block-item__link\" href={link}>\n                          {name}\n                        </a>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              ))}\n            </div>\n          </Col>\n        </Row>\n      </Container>\n    </footer>\n  );\n};\n\nexport default Footer;\n","import * as React from 'react';\nimport { get } from 'lodash/fp';\nimport { graphql, useStaticQuery } from 'gatsby';\n\nimport Header from '../Header';\nimport Footer from '../Footer';\n\nimport './index.scss';\n\ninterface ILayoutProps extends React.HTMLProps<HTMLDivElement> {\n  location: Location;\n  children: React.ReactNode;\n}\n\nconst Layout = (props: ILayoutProps) => {\n  const { location } = props;\n  const data = useStaticQuery(graphql`\n    query GetSiteMetadata {\n      site {\n        siteMetadata {\n          title\n          since\n          author\n          menu {\n            name\n            path\n            header\n          }\n          socials {\n            name\n            link\n          }\n          friends {\n            name\n            link\n          }\n        }\n      }\n    }\n  `);\n  const metadata = get('site.siteMetadata', data);\n\n  return (\n    <div className=\"layout\">\n      <Header location={location} metadata={metadata} />\n      <div className=\"content\">\n        {props.children}\n      </div>\n      <Footer metadata={metadata} />\n    </div>\n  );\n};\n\nexport default Layout;\n","'use strict';\nconst strictUriEncode = require('strict-uri-encode');\nconst decodeComponent = require('decode-uri-component');\nconst splitOnFirst = require('split-on-first');\n\nfunction encoderForArrayFormat(options) {\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tconst index = result.length;\n\t\t\t\tif (value === undefined) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[', index, ']'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\t...result,\n\t\t\t\t\t[encode(key, options), '[', encode(index, options), ']=', encode(value, options)].join('')\n\t\t\t\t];\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (value === undefined) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, [encode(key, options), '[]'].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '[]=', encode(value, options)].join('')];\n\t\t\t};\n\n\t\tcase 'comma':\n\t\t\treturn key => (result, value, index) => {\n\t\t\t\tif (!value) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (index === 0) {\n\t\t\t\t\treturn [[encode(key, options), '=', encode(value, options)].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [[result, encode(value, options)].join(',')];\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (value === undefined) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [...result, encode(key, options)];\n\t\t\t\t}\n\n\t\t\t\treturn [...result, [encode(key, options), '=', encode(value, options)].join('')];\n\t\t\t};\n\t}\n}\n\nfunction parserForArrayFormat(options) {\n\tlet result;\n\n\tswitch (options.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /(\\[\\])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\n\t\tcase 'comma':\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tconst isArray = typeof value === 'string' && value.split('').indexOf(',') > -1;\n\t\t\t\tconst newValue = isArray ? value.split(',') : value;\n\t\t\t\taccumulator[key] = newValue;\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t}\n}\n\nfunction encode(value, options) {\n\tif (options.encode) {\n\t\treturn options.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction decode(value, options) {\n\tif (options.decode) {\n\t\treturn decodeComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t}\n\n\tif (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input))\n\t\t\t.sort((a, b) => Number(a) - Number(b))\n\t\t\t.map(key => input[key]);\n\t}\n\n\treturn input;\n}\n\nfunction extract(input) {\n\tconst queryStart = input.indexOf('?');\n\tif (queryStart === -1) {\n\t\treturn '';\n\t}\n\n\treturn input.slice(queryStart + 1);\n}\n\nfunction parse(input, options) {\n\toptions = Object.assign({\n\t\tdecode: true,\n\t\tarrayFormat: 'none'\n\t}, options);\n\n\tconst formatter = parserForArrayFormat(options);\n\n\t// Create an object with no prototype\n\tconst ret = Object.create(null);\n\n\tif (typeof input !== 'string') {\n\t\treturn ret;\n\t}\n\n\tinput = input.trim().replace(/^[?#&]/, '');\n\n\tif (!input) {\n\t\treturn ret;\n\t}\n\n\tfor (const param of input.split('&')) {\n\t\tlet [key, value] = splitOnFirst(param.replace(/\\+/g, ' '), '=');\n\n\t\t// Missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tvalue = value === undefined ? null : decode(value, options);\n\n\t\tformatter(decode(key, options), value, ret);\n\t}\n\n\treturn Object.keys(ret).sort().reduce((result, key) => {\n\t\tconst value = ret[key];\n\t\tif (Boolean(value) && typeof value === 'object' && !Array.isArray(value)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(value);\n\t\t} else {\n\t\t\tresult[key] = value;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n}\n\nexports.extract = extract;\nexports.parse = parse;\n\nexports.stringify = (object, options) => {\n\tif (!object) {\n\t\treturn '';\n\t}\n\n\toptions = Object.assign({\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none'\n\t}, options);\n\n\tconst formatter = encoderForArrayFormat(options);\n\tconst keys = Object.keys(object);\n\n\tif (options.sort !== false) {\n\t\tkeys.sort(options.sort);\n\t}\n\n\treturn keys.map(key => {\n\t\tconst value = object[key];\n\n\t\tif (value === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (value === null) {\n\t\t\treturn encode(key, options);\n\t\t}\n\n\t\tif (Array.isArray(value)) {\n\t\t\treturn value\n\t\t\t\t.reduce(formatter(key), [])\n\t\t\t\t.join('&');\n\t\t}\n\n\t\treturn encode(key, options) + '=' + encode(value, options);\n\t}).filter(x => x.length > 0).join('&');\n};\n\nexports.parseUrl = (input, options) => {\n\tconst hashStart = input.indexOf('#');\n\tif (hashStart !== -1) {\n\t\tinput = input.slice(0, hashStart);\n\t}\n\n\treturn {\n\t\turl: input.split('?')[0] || '',\n\t\tquery: parse(extract(input), options)\n\t};\n};\n","'use strict';\nmodule.exports = str => encodeURIComponent(str).replace(/[!'()*]/g, x => `%${x.charCodeAt(0).toString(16).toUpperCase()}`);\n","'use strict';\nvar token = '%[a-f0-9]{2}';\nvar singleMatcher = new RegExp(token, 'gi');\nvar multiMatcher = new RegExp('(' + token + ')+', 'gi');\n\nfunction decodeComponents(components, split) {\n\ttry {\n\t\t// Try to decode the entire string first\n\t\treturn decodeURIComponent(components.join(''));\n\t} catch (err) {\n\t\t// Do nothing\n\t}\n\n\tif (components.length === 1) {\n\t\treturn components;\n\t}\n\n\tsplit = split || 1;\n\n\t// Split the array in 2 parts\n\tvar left = components.slice(0, split);\n\tvar right = components.slice(split);\n\n\treturn Array.prototype.concat.call([], decodeComponents(left), decodeComponents(right));\n}\n\nfunction decode(input) {\n\ttry {\n\t\treturn decodeURIComponent(input);\n\t} catch (err) {\n\t\tvar tokens = input.match(singleMatcher);\n\n\t\tfor (var i = 1; i < tokens.length; i++) {\n\t\t\tinput = decodeComponents(tokens, i).join('');\n\n\t\t\ttokens = input.match(singleMatcher);\n\t\t}\n\n\t\treturn input;\n\t}\n}\n\nfunction customDecodeURIComponent(input) {\n\t// Keep track of all the replacements and prefill the map with the `BOM`\n\tvar replaceMap = {\n\t\t'%FE%FF': '\\uFFFD\\uFFFD',\n\t\t'%FF%FE': '\\uFFFD\\uFFFD'\n\t};\n\n\tvar match = multiMatcher.exec(input);\n\twhile (match) {\n\t\ttry {\n\t\t\t// Decode as big chunks as possible\n\t\t\treplaceMap[match[0]] = decodeURIComponent(match[0]);\n\t\t} catch (err) {\n\t\t\tvar result = decode(match[0]);\n\n\t\t\tif (result !== match[0]) {\n\t\t\t\treplaceMap[match[0]] = result;\n\t\t\t}\n\t\t}\n\n\t\tmatch = multiMatcher.exec(input);\n\t}\n\n\t// Add `%C2` at the end of the map to make sure it does not replace the combinator before everything else\n\treplaceMap['%C2'] = '\\uFFFD';\n\n\tvar entries = Object.keys(replaceMap);\n\n\tfor (var i = 0; i < entries.length; i++) {\n\t\t// Replace all decoded components\n\t\tvar key = entries[i];\n\t\tinput = input.replace(new RegExp(key, 'g'), replaceMap[key]);\n\t}\n\n\treturn input;\n}\n\nmodule.exports = function (encodedURI) {\n\tif (typeof encodedURI !== 'string') {\n\t\tthrow new TypeError('Expected `encodedURI` to be of type `string`, got `' + typeof encodedURI + '`');\n\t}\n\n\ttry {\n\t\tencodedURI = encodedURI.replace(/\\+/g, ' ');\n\n\t\t// Try the built in decoder first\n\t\treturn decodeURIComponent(encodedURI);\n\t} catch (err) {\n\t\t// Fallback to a more advanced decoder\n\t\treturn customDecodeURIComponent(encodedURI);\n\t}\n};\n","'use strict';\n\nmodule.exports = (string, separator) => {\n\tif (!(typeof string === 'string' && typeof separator === 'string')) {\n\t\tthrow new TypeError('Expected the arguments to be of type `string`');\n\t}\n\n\tif (separator === '') {\n\t\treturn [string];\n\t}\n\n\tconst separatorIndex = string.indexOf(separator);\n\n\tif (separatorIndex === -1) {\n\t\treturn [string];\n\t}\n\n\treturn [\n\t\tstring.slice(0, separatorIndex),\n\t\tstring.slice(separatorIndex + separator.length)\n\t];\n};\n"],"sourceRoot":""}